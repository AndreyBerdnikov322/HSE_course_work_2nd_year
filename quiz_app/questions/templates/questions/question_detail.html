{% extends "questions/base.html" %}

{% block content %}
    <div class="card">
        <h2>Детали вопроса:</h2>
        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
            <a href="{% url 'question_update' question.pk %}" class="btn">Редактировать</a>
            <a href="{% url 'question_delete' question.pk %}" class="btn btn-danger">Удалить</a>
            <a href="{% url 'question_list' %}" class="btn btn-secondary">Назад к списку</a>
        </div>
        
        <div class="card">
            <h3>{{ question.text }}</h3>
            <p><strong>Тип вопроса:</strong> {{ question.question_type }}</p>
            <p><strong>Создан:</strong> {{ question.created_at|date:"Y-m-d H:i" }}</p>
            <p><strong>Обновлён:</strong> {{ question.updated_at|date:"Y-m-d H:i" }}</p>
        </div>
        
        <div class="card" style="margin-top: 20px;">
            <h3>Изображения</h3>
            
            <!-- Список изображений с возможностью удаления -->
            <div id="imageList">
                {% for image in question.images.all %}
                <div class="image-card" style="margin-bottom: 15px; padding: 10px; border: 1px solid #ddd;">
                    <img src="{{ image.image.url }}" alt="{{ image.caption }}" style="max-width: 200px;">
                    {% if image.caption %}<p>{{ image.caption }}</p>{% endif %}
                    <form method="post" 
                          hx-post="{% url 'delete_image' image.pk %}" 
                          hx-target="closest .image-card"
                          hx-confirm="Are you sure you want to delete this image?">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger" style="margin-top: 5px;">Delete Image</button>
                    </form>
                </div>
                {% empty %}
                <p>No images yet.</p>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}